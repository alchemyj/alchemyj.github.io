<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Tutorial · AlchemyJ</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Tutorial: Enable REST security"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Tutorial · AlchemyJ"/><meta property="og:type" content="website"/><meta property="og:url" content="//"/><meta property="og:description" content="# Tutorial: Enable REST security"/><meta property="og:image" content="/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="/css/atom-one-dark-reasonable.css"/><script src="/js/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="https://www.alchemyj.io" id="siteSubject1" target="_self"><span id="siteSubject2">Alchemy</span><span id="siteSubject3">J</span></a><span id="siteSubject4"> by</span><span> </span><a href="http://www.axisoft.com" rel="noopener noreferrer" data-type="external" data-content="http://www.axisoft.com" id="siteSubject5" target="_blank">Axisoft</a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://www.alchemyj.io/features" target="_self">Features</a></li><li class=""><a href="https://www.alchemyj.io/contact-us" target="_self">Contact Us</a></li><li class="siteNavGroupActive"><a href="/docs/GetStarted/GetStarted" target="_self">Docs</a></li><li class=""><a href="https://www.alchemyj.io/about-us" target="_self">About Us</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Enabling REST security</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Get started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/GetStarted/GetStarted">Get started</a></li><li class="navListItem"><a class="navItem" href="/docs/GetStarted/Install">Install AlchemyJ</a></li><li class="navListItem"><a class="navItem" href="/docs/GetStarted/SetupYourMicrosoftExcel">Set up your Microsoft Excel</a></li><li class="navListItem"><a class="navItem" href="/docs/GetStarted/WriteYourFirstRestApi">Write your first REST API</a></li><li class="navListItem"><a class="navItem" href="/docs/GetStarted/PreviewYourFirstRestApi">Preview your first REST API</a></li><li class="navListItem"><a class="navItem" href="/docs/GetStarted/BuildAndRunYourRestApi">Build and run your REST API</a></li><li class="navListItem"><a class="navItem" href="/docs/GetStarted/GoingFurther">Going further</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Terms &amp; concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/TerminologyAndConcepts/TerminologyAndConcepts">Terms and concepts</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Samples &amp; tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Recipe book</h4><ul><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/RecipeBook">Recipes</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/AccessingDatabase">Accessing database</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/DataValidationBackend">Data validation (Backend)</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/DataValidationUi">Data validation (UI)</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/WorkingWithExternalFile">Reading and writing text files</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/InvokingExternalApi">Making web service requests</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/SendingEmail">Sending email</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/CatchingTheError">Raising exceptions</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/UsingArrayForLibraryFunction">Returning multiple cells</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/ConstructingAndParsingJson">Constructing JSON strings</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/ParsingJsonString">Parsing JSON strings</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/HavingApplicationConfigurations">Reading application configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/PerformanceNOptimization">Improve performance</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/AuthenticationWithLdap">Authenticating an user in Java APIs</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/IntegratingWithYourExistingCode">Using AlchemyJ Java API in a project</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/CallingExternalJavaFunction">Calling external Java functions</a></li><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/RecipeBook/SettingUpTheLicenseFile">Setting up the license file</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/SamplesNTutorials/Tutorials">Tutorials</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">AlchemyJ Workbook</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Development/AlchemyjWorkbook/Introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/AlchemyjWorkbook/WriteYourFirstApi">Write your first Java API</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/AlchemyjWorkbook/AlchemyjStudio">AlchemyJ Studio</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/AlchemyjWorkbook/SysRuntimeWorksheet">SysRuntime Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/AlchemyjWorkbook/SysConfigWorksheet">SysConfig Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/AlchemyjWorkbook/AppConfigWorksheet">AppConfig Worksheet</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Business logic</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Development/BusinessLogic/Tutorial">Tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/BusinessLogic/InputAndOutput">Input and output</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/BusinessLogic/AddingBusinessLogic">Adding business logic</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/BusinessLogic/DbSchemaWorksheet">DB Schema Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/BusinessLogic/DataDictionaryWorksheet">Data Dictionary Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/BusinessLogic/AlchemyjModelingBestPractice">AlchemyJ modeling best practice</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Configuring Java API</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Development/ConfiguringJavaApi/Introduction">Introduction to AlchemyJ Java API</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/ConfiguringJavaApi/PackageDefinitionWorksheet">Package Definition Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/ConfiguringJavaApi/ClassDefinitionWorksheet">Class Definition Worksheet</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Configuring REST API</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Development/ConfiguringRestApi/Introduction">Introduction to AlchemyJ REST API</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/ConfiguringRestApi/Tutorial">Tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/ConfiguringRestApi/ControllerWorksheet">Controller Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/ConfiguringRestApi/EndpointWorksheet">Endpoint Worksheet</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Enabling REST security</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/Development/EnablingRestSecurity/Tutorial">Tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/EnablingRestSecurity/SecurityAuthenticationWorksheet">Security Authentication Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/EnablingRestSecurity/SecurityUserDetailsServiceWorksheet">Security User Details Service Worksheet</a></li><li class="navListItem"><a class="navItem" href="/docs/Development/EnablingRestSecurity/SecurityResourceAuthWorksheet">Security Resource Auth Worksheet</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Testing &amp; debugging<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/TestingAndDebugging/Tutorial">Tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/TestingAndDebugging/PreviewYourWorkInExcel">Preview your work in Excel</a></li><li class="navListItem"><a class="navItem" href="/docs/TestingAndDebugging/TestYourApiByRunningUnitTest">Test your API by running unit test</a></li><li class="navListItem"><a class="navItem" href="/docs/TestingAndDebugging/EnableTheDebuggingMode">Enable the Debugging Mode</a></li><li class="navListItem"><a class="navItem" href="/docs/TestingAndDebugging/DefineYourOwnTestingData">Define your own testing data</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">AJ Excel Extended Functions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/Index">Index</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/AuthenLdap">AuthenLdap</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/CallFunction">CallFunction</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/CallWsRest">CallWsRest</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/CallWsSoap">CallWsSoap</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/CheckDataItem">CheckDataItem</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/CountRec">CountRec</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/CreateRec">CreateRec</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/DeleteRec">DeleteRec</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/ExecuteSp">ExecuteSP</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/ExecuteSql">ExecuteSql</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/FilterArray">FilterArray</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/FilterJson">FilterJson</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/GetAddress">GetAddress</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/GetLastUsedCellAddress">GetLastUsedCellAddress</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/GetModelError">GetModelError</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/GetSystemError">GetSystemError</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/MakeJson">MakeJson</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/MakeJsonFromSchema">MakeJsonFromSchema</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/MakeJsonFromTable">MakeJsonFromTable</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/MergeRec">MergeRec</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/PopulateJsonToTable">PopulateJsonToTable</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/RaiseError">RaiseError</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/ReadFile">ReadFile</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/ReadRec">ReadRec</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/RegExpCount">RegExpCount</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/RegExpMatch">RegExpMatch</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/SendEmail">SendEmail</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/SortArray">SortArray</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/UpdateRec">UpdateRec</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/AlchemyjLibraryFunctionsIndex/WriteFile">WriteFile</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Debugging Actions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/Index">Index</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/generate-debug-excel">generate-debug-excel</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/set-formula-to-cell">set-formula-to-cell</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/set-value-to-cell">set-value-to-cell</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-aj-library-inout">view-aj-library-inout</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-cell">view-cell</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-cookies">view-cookies</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-env-props">view-env-props</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-exception">view-exception</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-fun-point-inout">view-fun-point-inout</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-req-body">view-req-body</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-req-header">view-req-header</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-req-param">view-req-param</a></li><li class="navListItem"><a class="navItem" href="/docs/Reference/DebuggingActions/view-session">view-session</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Reference/SupportedExcelFunctions">Supported Excel functions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">FAQ<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Faq/Faq">FAQ</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="tutorial-enable-rest-security"></a><a href="#tutorial-enable-rest-security" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tutorial: Enable REST security</h1>
<p>You can control who may access your REST endpoint simply by doing configurations in AlchemyJ. For instance, you may define whether a user needs to login and has some specific authorities to access a specific endpoint. This tutorial will show you how to set up  security in AlchemyJ REST API.</p>
<h2><a class="anchor" aria-hidden="true" id="before-starting"></a><a href="#before-starting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Before starting</h2>
<p>Before setting access control of a REST API, you need to have a REST API setup in AlchemyJ. We will use the <a href="../../GetStarted/WriteYourFirstRestApi#create-say-hello-rest-api">Say Hello example</a> as an example here. Please follow the Say Hello example and create the REST API first.</p>
<p>AlchemyJ uses LDAP as an authentication service to verify user name and password. Therefore, to use AlchemyJ security feature, you need to prepare some testing account in a LDAP server (for example, in Microsoft Active Directory).</p>
<p>Moreover, we need a table to store user account status and another table to define the authorities a user has.  Please create table t_sys_user and t_sys_authorities in your database before proceeding.</p>
<p><a href="TutorialImg/image-20200111071429053.png"><img src="TutorialImg/image-20200111071429053.png" alt="image-20200111071429053"></a></p>
<p><a href="TutorialImg/image-20200111071947894.png"><img src="TutorialImg/image-20200111071947894.png" alt="image-20200111071947894"></a></p>
<h2><a class="anchor" aria-hidden="true" id="example-1---session-based-security"></a><a href="#example-1---session-based-security" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1 - Session based security</h2>
<p>In this example, we will setup session based security. Users can login by submitting a user name and a password. If the LDAP verifies that the password is correct, the user id will be stored in server session. Subsequent requests will be able to get the logged in user id.</p>
<ol>
<li><p>To enable the login service, <a href="SecurityAuthenticationWorksheet">Security Authentication Worksheet</a> is needed.  To enable authority based access control, the <a href="SecurityUserDetailsServiceWorksheet">Security User Details Service Worksheet</a> is needed. To control endpoint access, the <a href="SecurityResourceAuthWorksheet">Security Resource Auth Worksheet</a> is needed. Use the New Definition menu to add them into your workbook.</p>
<p><a href="TutorialImg/image-20200113145521816.png"><img src="TutorialImg/image-20200113145521816.png" alt="image-20200113145521816"></a></p>
<p><a href="TutorialImg/image-20200113145621173.png"><img src="TutorialImg/image-20200113145621173.png" alt="image-20200113145621173"></a></p></li>
<li><p>Go to the <a href="../ConfiguringRestApi/ControllerWorksheet">Rest Controller Worksheet</a>. In <a href="../ConfiguringRestApi/ControllerWorksheet#web-security-settings">Web Security Settings</a> section, enable the security feature. Specify the name of the 3 security definition worksheets.</p>
<p><a href="TutorialImg/image-20200113105431264.png"><img src="TutorialImg/image-20200113105431264.png" alt="image-20200113105431264"></a></p></li>
<li><p>Configure the available data source. If your application uses only contains one database, only the primary data source shall be defined. If you want to store session data, user authority, and endpoint access control configuration in another database, you may define additional data source for them.</p>
<p><a href="TutorialImg/image-20200113110246794.png"><img src="TutorialImg/image-20200113110246794.png" alt="image-20200113110246794"></a></p></li>
<li><p>Fill in the LDAP server information. The LDAP server will be used for user id and password verification. There is no need to fill in admin-dn and admin-pwd. They are reserved for feature enhancement in later AlchemyJ release.</p>
<p><a href="TutorialImg/image-20200113110534533.png"><img src="TutorialImg/image-20200113110534533.png" alt="image-20200113110534533"></a></p></li>
<li><p>Go to the <a href="SecurityAuthenticationWorksheet">Security Authentication Worksheet</a>, configure the Authentication Type and Token Validation Type. Since we are setting up the login service, <strong>Username Password Token Authentication</strong> should be selected as Authentication Type.  This indicates the service will take username and password for verification. Next, set <strong>LDAP Authentication as Authentication Token</strong> Validation type. This tells AlchemyJ that LDAP shall be used to verify the user id and password.</p>
<p><a href="TutorialImg/image-20200113111140886.png"><img src="TutorialImg/image-20200113111140886.png" alt="image-20200113111140886"></a></p></li>
<li><p>Next, we shall define the details of username password token authentication. The recommended to use POST method for the login service as it is more secure. But to make this example be simple to test, the user name and password for authentication will be passed as query parameter in the URL by the GET method.  In a production environment, POST shall be used.</p>
<p><a href="TutorialImg/image-20200113111240359.png"><img src="TutorialImg/image-20200113111240359.png" alt="image-20200113111240359"></a></p></li>
<li><p>Next, define the LDAP connection to be used. Set it to primary as defined in step 4.</p>
<p><a href="TutorialImg/image-20200113111509106.png"><img src="TutorialImg/image-20200113111509106.png" alt="image-20200113111509106"></a></p>
<p><a href="TutorialImg/image-20200113111404212.png"><img src="TutorialImg/image-20200113111404212.png" alt="image-20200113111404212"></a></p></li>
<li><p>Configure the <a href="SecurityAuthenticationWorksheet#ldap-user-dn-replacement-holder">LDAP User-Dn Replacement Holder</a>.</p>
<p><a href="TutorialImg/image-20200113111703525.png"><img src="TutorialImg/image-20200113111703525.png" alt="image-20200113111703525"></a></p></li>
<li><p>Go to the <a href="SecurityUserDetailsServiceWorksheet">Security User Details Service Worksheet</a> to configure how to retrieve the user detailed information, such as the account state (normal, locked, expired, etc.) and authorities (what rights have been granted to the user).</p>
<p><a href="TutorialImg/image-20200113112149308.png"><img src="TutorialImg/image-20200113112149308.png" alt="image-20200113112149308"></a></p></li>
<li><p>Go to <a href="SecurityResourceAuthWorksheet">Security Resource Auth Worksheet</a> to define Endpoint access control. That is, which user and with which authorities can access an endpoint. There are different ways to store these configurations. In can be defined in Excel (static) or in a database table (dynamic). To keep this example simple, we will use the Static approach. The means End Point URL authentication rules are defined in the Excel file. To change the rules, you will have to change the definition in Excel and re-build the project.</p>
<p><a href="TutorialImg/image-20200113112337148.png"><img src="TutorialImg/image-20200113112337148.png" alt="image-20200113112337148"></a></p></li>
<li><p>To configure all URLs must be accessed after authenticated (logged in).</p>
<p><a href="TutorialImg/image-20200113112437735.png"><img src="TutorialImg/image-20200113112437735.png" alt="image-20200113112437735"></a></p></li>
<li><p>Build the project and run on server.</p>
<p><a href="TutorialImg/image-20200113150905219.png"><img src="TutorialImg/image-20200113150905219.png" alt="image-20200113150905219"></a></p></li>
<li><p>Try to access before logging in. As you can see, the access has been denied.</p>
<p><a href="TutorialImg/image-20200113112725971.png"><img src="TutorialImg/image-20200113112725971.png" alt="image-20200113112725971"></a></p></li>
<li><p>This time, login by accessing the login endpoint first. Then call sayHello again.  The proper result is returned.</p>
<p><a href="TutorialImg/image-20200113112928224.png"><img src="TutorialImg/image-20200113112928224.png" alt="image-20200113112928224"></a></p>
<p><a href="TutorialImg/image-20200113113226309.png"><img src="TutorialImg/image-20200113113226309.png" alt="image-20200113113226309"></a></p></li>
<li><p>Now, let us change Access Operator to <strong>Has any authority</strong> and add <strong>admin</strong> to Authority List. This means only users with admin authority shall be allowed to access the endpoint that matches the URL Pattern. In our database, only user &quot;peter&quot; has such authority. Change the setting from <a href="SecurityResourceAuthWorksheet">Security Resource Auth Worksheet</a>, then re-build the project and test it.</p>
<p><a href="TutorialImg/image-20200113113946541.png"><img src="TutorialImg/image-20200113113946541.png" alt="image-20200113113946541"></a></p></li>
<li><p>Now, if we use user &quot;john&quot; to login and then open the URL, no access is allowed as john does not have admin authority.</p>
<p><a href="TutorialImg/image-20200113114254076.png"><img src="TutorialImg/image-20200113114254076.png" alt="image-20200113114254076"></a></p></li>
<li><p>This time, login as &quot;peter&quot; and access is granted.</p>
<p><a href="TutorialImg/image-20200113114542755.png"><img src="TutorialImg/image-20200113114542755.png" alt="image-20200113114542755"></a></p>
<p><a href="TutorialImg/image-20200113114801813.png"><img src="TutorialImg/image-20200113114801813.png" alt="image-20200113114801813"></a></p></li>
<li><p>If we change the state of peter from 0(normal) to 1(expired), and log in again, peter will not be able to login as his user status is expired.</p>
<p><a href="TutorialImg/image-20200113115555676.png"><img src="TutorialImg/image-20200113115555676.png" alt="image-20200113115555676"></a></p>
<p><a href="TutorialImg/image-20200113115828452.png"><img src="TutorialImg/image-20200113115828452.png" alt="image-20200113115828452"></a></p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="example-2---jwt-security"></a><a href="#example-2---jwt-security" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2 - JWT security</h2>
<p>In example 1, we have setup a user password token authentication. In this example, we will modify the setting so that it generates a JSON Web Token and uses it for authentication. This approach is often used in REST API as REST API should be stateless.</p>
<p>Since JWT is retrieved from a request header, it cannot be test simply by accessing an URL using a browser.  In this example, we use Postman, to submit the request.</p>
<ol>
<li>Go to <a href="SecurityAuthenticationWorksheet">Security Authentication Worksheet</a>, change <a href="SecurityAuthenticationWorksheet#security-holder-store-type">Security Holder Store Type</a> to JWT. This tells AlchemyJ that after the LDAP server has confirmed the user id and password are correct, a JWT token will be generated and returned.</li>
</ol>
<p><a href="TutorialImg/image-20200113152956483.png"><img src="TutorialImg/image-20200113152956483.png" alt="image-20200113152956483"></a></p>
<ol start="2">
<li><p>We need to define how our API will validate a JWT token. To do that, add one more <a href="SecurityAuthenticationWorksheet">Security Authentication Worksheet</a> and rename it as &amp;&amp;SecurityAuthenticationJwt. Specify <strong>JWT Token Authentication</strong> as the <a href="SecurityAuthenticationWorksheet#authentication-type">Authentication Type</a>, and <strong>Username Token Validation</strong> as <a href="SecurityAuthenticationWorksheet#authentication-token-validation-type">Authentication Token Validation Type</a>. This means our API will look for a JWT in requests and the JWT shall contain a user id.</p>
<p><a href="TutorialImg/image-20200113153821388.png"><img src="TutorialImg/image-20200113153821388.png" alt="image-20200113153821388"></a></p></li>
<li><p>In section <a href="SecurityAuthenticationWorksheet#jwt-token-authentication-common-settings">JWT Token Authentication Common Settings</a>, specify the <a href="SecurityAuthenticationWorksheet#jwt-secret">JWT Secret</a> which will be used to encrypt and decrypt JWT tokens.</p>
<p><a href="TutorialImg/image-20200113153944187.png"><img src="TutorialImg/image-20200113153944187.png" alt="image-20200113153944187"></a></p></li>
<li><p>Go to the <a href="../ConfiguringRestApi/ControllerWorksheet">Rest Controller Worksheet</a>. In <a href="../ConfiguringRestApi/ControllerWorksheet#web-security-settings">Web Security Settings</a> section, add the worksheet we just created. Then build and run the project.</p>
<p><a href="TutorialImg/image-20200113153530569.png"><img src="TutorialImg/image-20200113153530569.png" alt="image-20200113153530569"></a></p></li>
<li><p>Call the sayHello before log-in. The request will be denied.</p>
<p><a href="TutorialImg/image-20200113152553230.png"><img src="TutorialImg/image-20200113152553230.png" alt="image-20200113152553230"></a></p></li>
<li><p>Next, log in by calling the login endpoint. You will find that there is a JWT token in the response headers. The key is <strong>Authorization</strong>. Please copy the token for the coming request.</p>
<p><a href="TutorialImg/image-20200113152640027.png"><img src="TutorialImg/image-20200113152640027.png" alt="image-20200113152640027"></a></p>
<p><a href="TutorialImg/image-20200113154118649.png"><img src="TutorialImg/image-20200113154118649.png" alt="image-20200113154118649"></a></p></li>
<li><p>Try to access the sayHello endpoint again by including the received JWT in header <strong>Authorization</strong> and the request should be granted. Please note that the expiration time of the JWT token is 100 seconds by default. You should send the request before that. You can change <a href="SecurityAuthenticationWorksheet#jwt-expiration">JWT Expiration</a> to the desired value.</p>
<p><a href="TutorialImg/image-20200113154326250.png"><img src="TutorialImg/image-20200113154326250.png" alt="image-20200113154326250"></a></p></li>
</ol>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/Development/ConfiguringRestApi/EndpointWorksheet"><span class="arrow-prev">← </span><span>Endpoint Worksheet</span></a><a class="docs-next button" href="/docs/Development/EnablingRestSecurity/SecurityAuthenticationWorksheet"><span>Security Authentication Worksheet</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#before-starting">Before starting</a></li><li><a href="#example-1---session-based-security">Example 1 - Session based security</a></li><li><a href="#example-2---jwt-security">Example 2 - JWT security</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap" id="site_map"><table align="center" border="0"><tbody><tr><td align="left"><span height="46px" id="emailUsSpan"><a href="mailto:enquiry@alchemyj.io" id="emailUs">Email Us</a><b>     </b><a href="tel:+65 6741 1381" id="callUs">Call Us</a></span></td><td align="right" id="copyrightTd"><span height="46px" id="copyright">Copyright © 2020 <a href="http://www.axisoft.com" target="_blank" data-content="http://www.axisoft.com" data-type="external" rel="noopener noreferrer" id="copyrightLink"> Axisoft (Asia Pacific) Limited</a> All Rights Reserved.</span></td></tr></tbody></table></section></footer></div></body></html>